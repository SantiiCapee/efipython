{% extends 'layout.html' %}
{% block title %}Blog{% endblock %}
{% block body %}
<h1>Posts</h1>

{% for post in posts %}
    <div>
        <h2>{{ post.titulo }}</h2>
        <p>
            <small>
                Publicado por {{ post.usuario.nombre }} 
                el {{ post.fecha_creacion.strftime('%d/%m/%Y %H:%M') }} 
                en {{ post.categoria.nombre }}
            </small>
        </p>
        <p>{{ post.contenido }}</p>
        <a href="{{ url_for('ver_post', post_id=post.id) }}">Leer más</a>
    </div>
    <hr>
{% else %}
    <p>No hay posts aún.</p>
{% endfor %}
{% if session.get("usuario_id") %}
    <p>Hola, {{ session["usuario_nombre"] }} | <a href="{{ url_for('logout') }}">Cerrar sesión</a> | <a href="{{ url_for('nuevo_post') }}">Publicar un Post</a></p>
{% else %}
    <a href="{{ url_for('login') }}">Iniciar sesión</a> | <a href="{{ url_for('registro') }}">Registrarse</a> | <a href="{{ url_for('nuevo_post') }}">Publicar un Post</a>
{% endif %}
{% endblock %}
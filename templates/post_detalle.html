{% extends 'layout.html' %}
{% block title %}{{ post.titulo }}{% endblock %}
{% block body %}
<h2>{{ post.titulo }}</h2>
<p>{{ post.contenido }}</p>
<small>Autor: {{ post.usuario.nombre }} | Categoría: {{ post.categoria.nombre }}</small>

<hr>
<h3>Comentarios:</h3>
{% for c in post.comentarios %}
    <p>{{ c.texto }} - <i>{{ c.usuario.nombre }}</i></p>
{% else %}
    <p>No hay comentarios aún.</p>
{% endfor %}

<hr>
{% if session.get("usuario_id") %}
<form method="POST">
    <textarea name="texto" placeholder="Escribe un comentario..." required></textarea><br>
    <button type="submit">Comentar</button>
</form>
{% else %}
<p>Inicia sesión para comentar: <a href="{{ url_for('login') }}">Login</a></p>
{% endif %}
{% endblock %}